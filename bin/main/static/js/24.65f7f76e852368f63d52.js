webpackJsonp([24],{xY35:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l={name:"EXCELCI",components:{TreeParent:e("xGbf").a},data:function(){return{labels:{clsSearch:"",noDataMessage:"",selectNullMsg:"",cancle:"",parentDialogTitle:"",excelDownload:"",status:"",search:"",name:"",description:"",confirm:"",classstructureId:"",ciId:""},tree:{data:[],expandKeys:["root"],selectData:{},showTreeFlag:!0,showIconFlag:!0,showCntFlag:!1,showNodeIconFn:function(t){return t.classiconsvg},shwoAddIconFn:function(t){return!1}},listGrid:{tableProps:{border:!1,stripe:!1,headerCellStyle:function(){return"font-family: sans-serif; font-size: 14px; color: #28313b; font-weight: bold; height:60px"}},currentPage:1,rowIndex:-1,pageProps:{pageSize:10,pageSizes:[5,10,15]},data:[],filters:[{prop:["id","orgId","ciId","classstructureId","description","status"],value:""},{prop:"tree",value:""}],filteredData:[],titles:[{prop:"ciId",width:"180px"},{prop:"classstructureNm",width:"200px"},{prop:"ciname",width:"250px"},{prop:"description",width:"250x"},{prop:"extaln18",width:"180px"},{prop:"status",width:"150px"}],columns:["id","orgId","ciId","classstructureId","description","status"],columnNames:["id","orgId","ciId","classstructureId","description","status"],currentData:{},ciExtNmData:{},total:0,srchCnd:null},parent:null,parentName:"",ancestor:"",showParentDialogFlag:!1,hardWareFields:[],softwareFields:[]}},methods:{initialize:function(){this.$util.setLabels(this.$options.name,this.labels),this.orgId=this.$store.getters.getUser.orgId,this.excelFields()},setFilters:function(){this.$util.isNull(this.parent)?this.$util.esmessage(this,"warn",this.labels.selectNullMsg):(this.listGrid.filters[1].value=this.parent,this.listGrid.currentPage=1)},excelFields:function(){var t=this;this.$http.get("/episode/api/asset/resource/excelci/property",{params:{ancestor:"HARDWARE"}}).then(function(a){t.hardWareFields=[{value:"ciId",label:a.data.ciId},{value:"classstructureNm",label:a.data.ciId},{value:"ciname",label:a.data.ciId},{value:"description",label:a.data.ciId},{value:"status",label:a.data.ciId},{value:"extaln1",label:a.data.extaln1},{value:"extaln2",label:a.data.extaln2},{value:"extaln3",label:a.data.extaln3},{value:"extaln4",label:a.data.extaln4},{value:"extaln5",label:a.data.extaln5},{value:"extaln6",label:a.data.extaln6},{value:"extaln7",label:a.data.extaln7},{value:"extaln8",label:a.data.extaln8},{value:"extaln9",label:a.data.extaln9},{value:"extaln10",label:a.data.extaln10},{value:"extaln11",label:a.data.extaln11},{value:"extaln12",label:a.data.extaln12},{value:"extaln13",label:a.data.extaln13},{value:"extaln14",label:a.data.extaln14},{value:"extaln15",label:a.data.extaln15},{value:"extaln16",label:a.data.extaln16},{value:"hardwareip",label:a.data.extaln17},{value:"extaln18",label:a.data.extaln18},{value:"extnum1",label:a.data.extnum1},{value:"extnum2",label:a.data.extnum2},{value:"extnum3",label:a.data.extnum3},{value:"extnum4",label:a.data.extnum4},{value:"extnum5",label:a.data.extnum5},{value:"extdate1",label:a.data.extdate1},{value:"extdate2",label:a.data.extdate2},{value:"extbool1",label:a.data.extbool1},{value:"extbool2",label:a.data.extbool2},{value:"extbool3",label:a.data.extbool3}]}).catch(function(t){console.log(t)}),this.$http.get("/episode/api/asset/resource/excelci/property",{params:{ancestor:"SOFTWARE"}}).then(function(a){t.softwareFields=[{value:"ciId",label:a.data.ciId},{value:"classstructureNm",label:a.data.ciId},{value:"ciname",label:a.data.ciId},{value:"description",label:a.data.ciId},{value:"status",label:a.data.ciId},{value:"extaln1",label:a.data.extaln1},{value:"extaln2",label:a.data.extaln2},{value:"softwareip",label:a.data.extaln3},{value:"extaln4",label:a.data.extaln4},{value:"extaln5",label:a.data.extaln5},{value:"extaln6",label:a.data.extaln6},{value:"extaln7",label:a.data.extaln7},{value:"extaln8",label:a.data.extaln8},{value:"extaln9",label:a.data.extaln9},{value:"extaln10",label:a.data.extaln10},{value:"extaln11",label:a.data.extaln11},{value:"extaln18",label:a.data.extaln18},{value:"extdate1",label:a.data.extdate1},{value:"extbool3",label:a.data.extbool3}]}).catch(function(t){console.log(t)})},getListData:function(t){var a=this;if(this.parent){this.listGrid.srchCnd=t;var e=1,l=10,s="update_dt",i="descending",r="";this.$util.isNull(t)||(e=t.page,l=t.pageSize,null!=t.sort.prop&&(s=t.sort.prop,i=t.sort.order),r=t.filters[1].value);var n={params:{page:e,pageSize:l,orderBy:s,sort:i,treeSearchParam:r}};this.$http.get("/episode/api/asset/resource/excelci",n).then(function(t){if(a.listGrid.data=t.data.data,a.listGrid.total=t.data.total,0===a.listGrid.total)return a.$util.esmessage(a,"warn",a.labels.noDataMessage),!1}).catch(function(t){console.log(t)})}},exportFilter:function(){var t=this;if(0!==this.listGrid.total){var a=this.listGrid.filters[1].value,e=this.listGrid.srchCnd,l="update_dt",s="descending";null!=e&&void 0!==e&&"undefined"!==e&&null!=e.sort.prop&&(l=e.sort.prop,s=e.sort.order);var i={params:{orderBy:l,sort:s,treeSearchParam:a}};this.$http.get("/episode/api/asset/resource/excelci",i).then(function(a){t.$util.csvExport(a.data.data,"HARDWARE"===t.ancestor?t.hardWareFields:t.softwareFields,t.listGrid.columnNames,"excelci")}).catch(function(t){console.log(t)})}else this.$util.esmessage(this,"warn",this.labels.noDataMessage)},openParentDialog:function(){var t=this;this.$http.get("/episode/api/system/common/classtree?orgId="+this.orgId+"&object=EXCELCI").then(function(a){t.tree.data=a.data}).catch(function(t){console.log(t)}),this.showParentDialogFlag=!0},confirmParentDialog:function(){var t=this.$refs.tree.$refs.tree.getCurrentNode();if(!this.$util.isNull(t))return"CLASSSTRUCTURE"===t.data.classstructureId?(this.$util.esmessage(this,"warn",this.labels.selectNullMsg),!1):(this.parent=t.data.classstructureId,this.parentName=t.data.description,this.ancestor=t.data.hierarchypath.substring(1).split("/")[0],void(this.showParentDialogFlag=!1));this.$util.esmessage(this,"warn",this.labels.selectNullMsg)},cancleParentDialog:function(){this.showParentDialogFlag=!1}},created:function(){this.initialize()}},s={render:function(){var t=this,a=t.$createElement,l=t._self._c||a;return l("div",{staticClass:"animated fadeIn"},[l("b-card",[l("b-row",[l("b-col",{attrs:{sm:"12"}},[l("div",{staticClass:"comm-btn-box",staticStyle:{height:"40px"},attrs:{role:"group"}})])],1),t._v(" "),l("p",{staticClass:"grid-line"}),t._v(" "),l("b-row",[l("b-col",{attrs:{sm:"4"}},[l("div",{staticClass:"search-component"},[l("input",{directives:[{name:"model",rawName:"v-model",value:t.parentName,expression:"parentName"}],staticClass:"form-control excel-1",staticStyle:{"background-color":"white"},attrs:{placeholder:t.labels.clsSearch,readonly:""},domProps:{value:t.parentName},on:{input:function(a){a.target.composing||(t.parentName=a.target.value)}}}),t._v(" "),l("a",{staticClass:"search-button cursor-pointer",staticStyle:{top:"7px"},on:{click:t.openParentDialog}},[t._v("search")])])]),t._v(" "),l("b-col",{attrs:{sm:"2"}},[l("b-button",{staticClass:"px-3 sm excel-1",staticStyle:{backgroundColor:"white",color:"#606266","font-weight":"bolder"},on:{click:t.setFilters}},[t._v(t._s(t.labels.search))])],1),t._v(" "),l("b-col",[l("div",{staticClass:"float-right mt-1",attrs:{role:"group"}},[l("el-button",{staticStyle:{padding:"0 0 0 0",width:"40px",height:"40px"},attrs:{title:t.labels.excelDownload},on:{click:t.exportFilter}},[l("img",{attrs:{src:e("QOY8"),width:"60%"}})])],1)])],1),t._v(" "),l("b-row",[l("b-col",{attrs:{sm:"12"}},[l("p",{staticClass:"grid-line"}),t._v(" "),l("data-tables-server",{ref:"grid",attrs:{"table-props":t.listGrid.tableProps,data:t.listGrid.data,filters:t.listGrid.filters,total:t.listGrid.total,"page-size":t.listGrid.pageProps.pageSize,"pagination-props":t.listGrid.pageProps,"current-page":t.listGrid.currentPage},on:{"query-change":t.getListData,"update:currentPage":function(a){return t.$set(t.listGrid,"currentPage",a)},"update:current-page":function(a){return t.$set(t.listGrid,"currentPage",a)}}},[l("el-table-column",{attrs:{prop:t.listGrid.titles[0].prop,label:t.labels.ciId,sortable:"custom",width:t.listGrid.titles[0].width}}),t._v(" "),l("el-table-column",{attrs:{prop:t.listGrid.titles[1].prop,label:t.labels.classstructureId,sortable:"custom",width:t.listGrid.titles[1].width}}),t._v(" "),l("el-table-column",{attrs:{prop:t.listGrid.titles[2].prop,label:t.labels.name,sortable:"custom",width:t.listGrid.titles[2].width}}),t._v(" "),l("el-table-column",{attrs:{prop:t.listGrid.titles[3].prop,label:t.labels.description,sortable:"custom"}}),t._v(" "),l("el-table-column",{attrs:{prop:t.listGrid.titles[4].prop,label:"ITSM CIID",sortable:"custom",width:t.listGrid.titles[4].width}}),t._v(" "),l("el-table-column",{attrs:{prop:t.listGrid.titles[5].prop,label:t.labels.status,sortable:"custom",width:t.listGrid.titles[5].width}})],1)],1)],1),t._v(" "),l("el-dialog",{attrs:{title:t.labels.parentDialogTitle,visible:t.showParentDialogFlag,width:"290px"},on:{"update:visible":function(a){t.showParentDialogFlag=a}}},[l("b-row",[l("div",{staticClass:"col"},[l("div",{staticClass:"treeDialog"},[l("TreeParent",{ref:"tree",attrs:{tree:t.tree}})],1)])]),t._v(" "),l("b-row",[l("div",{staticClass:"col mt-2"},[l("div",{staticClass:"d-flex justify-content-end"},[l("b-button",{staticClass:"px-3 sm",attrs:{variant:"primary"},on:{click:t.confirmParentDialog}},[t._v(t._s(t.labels.confirm))]),t._v(" "),l("b-button",{staticClass:"px-3 sm",attrs:{variant:"primary"},on:{click:t.cancleParentDialog}},[t._v(t._s(t.labels.cancle))])],1)])])],1)],1)],1)},staticRenderFns:[]},i=e("VU/8")(l,s,!1,null,null,null);a.default=i.exports}});
//# sourceMappingURL=24.65f7f76e852368f63d52.js.map