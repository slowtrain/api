webpackJsonp([15],{MIYh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("pFYg"),s=a.n(i),r={name:"ORGANIZATION",mounted:function(){this.initialize()},beforeDestroy:function(){this.listGrid.data=[],this.variableGrid.data=[],this.lables={},this.$nextTick(function(){this.listVisiable=!1})},data:function(){return{listVisiable:!0,labels:{title:"",new:"",delete:"",search:"",save:"",close:"",reset:"",fail:"",checkData:"",deleteSuccess:"",id:"",orgId:"",description:"",status:"",createId:"",createDt:"",updateId:"",updateDt:"",orgIdMessage:"",lengthMessage:"",excelDownload:"",successMessage:"",desMessage:""},listGrid:{currentPage:1,tableProps:{border:!1,stripe:!0,headerCellStyle:function(){return" font-family: sans-serif; font-size: 14px; color: #28313b; font-weight: bold; height:60px"},cekkStyle:""},pageProps:{pageSizes:[10,20,30]},rowIndex:-1,data:[],filters:[{prop:["orgId"],value:""}],filteredData:[],titles:[{prop:"id",label:"id",width:"50px"},{prop:"orgId",label:"orgId",width:"100px"},{prop:"description",label:"description",width:"100px"},{prop:"status",label:"status",width:"100px"},{prop:"createDt",label:"createDt",width:"100px"},{prop:"createNm",label:"createId",width:"100px"},{prop:"updateDt",label:"updateDt",width:"100px"},{prop:"updateNm",label:"updateId",width:"100px"}],columns:["id","orgId","description","status","createDt","createId","updateDt","updateId"],columnNames:["id","orgId","description","status","createDt","createId","updateDt","updateId"],currentData:{id:"",orgId:"",description:"",status:"",createDt:"",createId:"",updateDt:"",updateId:""},searchParam:""},variableGrid:{tableProps:{border:!1,stripe:!0,headerCellStyle:function(){return" font-family: sans-serif; font-size: 14px; color: #28313b; font-weight: bold; height:60px"},cekkStyle:""},pageProps:{pageSizes:[5,10,15]},rowIndex:-1,data:[],filters:[{prop:["orgId"],value:""}],filteredData:[],titles:[{prop:"id",label:"id",width:"50px"},{prop:"orgId",label:"orgId",width:"100px"},{prop:"key",label:"description",width:"100px"},{prop:"value",label:"status",width:"100px"}],currentData:{}},authorities:{ORGANIZATION_ADD:!1,ORGANIZATION_SAVE:!1,ORGANIZATION_DELETE:!1,ORGANIZATION_VAR_ADD:!1,ORGANIZATION_VAR_SAVE:!1,ORGANIZATION_VAR_DELETE:!1},validMsg:{orgIdMsg:"",desMsg:""},dialogFormVisible:!1,validVarFlag:!1,statusSelect:[]}},watch:{dialogFormVisible:function(t){for(var e in this.validMsg)this.validMsg[e]=""},"listGrid.currentData.orgId":function(t){this.$util.isNull(t)||this.listGrid.currentData.hasOwnProperty("id")||(this.validMsg.orgIdMsg="")},"listGrid.currentData.description":function(t){this.$util.isNull(t)||(this.validMsg.desMsg="")}},computed:{visibleAdd:function(){return this.authorities.ORGANIZATION_ADD},visibleSave:function(){return this.authorities.ORGANIZATION_SAVE},visibleDelete:function(){return this.authorities.ORGANIZATION_DELETE&&this.listGrid.currentData.hasOwnProperty("id")},visibleAddVar:function(){return this.authorities.ORGANIZATION_VAR_ADD},visibleDeleteVar:function(){return this.authorities.ORGANIZATION_VAR_DELETE}},methods:{initialize:function(){var t=this;this.$util.setLabels(this.$options.name,this.labels,this.listGrid.titles),this.$store.getters.getAuth.forEach(function(e){t.authorities[e.authorityId]=!0});var e={obj:this,paramList:[{dataObj:"statusSelect",domainId:"ORGSTATUS"}]};this.$util.getComboData(e),this.getListData()},getListData:function(){var t=this;this.$http.get("/episode/api/system/organization").then(function(e){t.listGrid.data=e.data}).catch(function(t){console.log(t)})},getRowData:function(t){var e=this;this.$http.get("/episode/api/system/organization/"+t).then(function(t){e.listGrid.currentData=t.data,e.listGrid.rowIndex=e.listGrid.data.indexOf(e.listGrid.currentRow)}),this.$http.get("/episode/api/system/organization/"+t+"/orgvariable").then(function(t){e.variableGrid.data=t.data})},blurOrgId:function(){var t=this;this.listGrid.currentData.hasOwnProperty("id")||this.$http.get("/episode/api/system/organization?orgId="+this.listGrid.currentData.orgId).then(function(e){e.data.length>0&&!t.$util.isNull(t.listGrid.currentData.orgId)?(t.validMsg.orgIdMsg=t.labels.checkData,t.listGrid.currentData.orgId=""):t.validMsg.orgIdMsg=""}).catch(function(t){console.log(t)})},changeValue:function(t){this.$util.isNull(t.id)?t.state="ADDED":t.state="CHANGED"},add:function(){this.dialogFormVisible=!0,this.listGrid.currentData={orgId:"",description:"",status:"ACTIVE",state:"ADDED"},this.variableGrid.data=[]},openModal:function(t){this.dialogFormVisible=!0,this.getRowData(t.id)},close:function(){this.dialogFormVisible=!1,this.listGrid.currentData={}},isValidationCheck:function(){var t=!0,e=this.listGrid.currentData.orgId,a=this.listGrid.currentData.description;return this.$util.isNull(e)&&(this.validMsg.orgIdMsg=this.labels.orgIdMessage,t=!1),this.$util.isNull(a)&&(this.validMsg.desMsg=this.labels.desMessage,t=!1),t},saveVar:function(){var t=this;this.validVarFlag=!1;var e=this.variableGrid.data.filter(function(t){return"CHANGED"===t.state||"ADDED"===t.state});if(e.filter(function(e){return t.$util.isNull(e.key)}).length>0)return this.$util.esmessage(this,"warn",this.labels.varKeyMessage),this.validVarFlag=!0,[];if(e.filter(function(e){return t.$util.isNull(e.value)}).length>0)return this.$util.esmessage(this,"warn",this.labels.varValueMessage),this.validVarFlag=!0,[];if(e.filter(function(e){return t.$util.isNull(e.description)}).length>0)return this.$util.esmessage(this,"warn",this.labels.varDesMessage),this.validVarFlag=!0,[];for(var a=function(a){var i=e[a];if(t.variableGrid.data.filter(function(t){return i.key===t.key}).length>1)return t.$util.esmessage(t,"warn",t.labels.duplicatedMessage),t.validVarFlag=!0,{v:[]}},i=0;i<e.length;i++){var r=a(i);if("object"===(void 0===r?"undefined":s()(r)))return r.v}return e},save:function(){var t=this;if(this.isValidationCheck()){var e=this.saveVar();if(this.validVarFlag)return;var a=this.listGrid.currentData.hasOwnProperty("id")?"PUT":"POST",i=this.listGrid.currentData.hasOwnProperty("id")?"/episode/api/system/organization/"+this.listGrid.currentData.id:"/episode/api/system/organization/";("CHANGED"===this.listGrid.currentData.state||"ADDED"===this.listGrid.currentData.state||e.length>0)&&(this.listGrid.currentData.orgvariable=e,this.$http({method:a,url:i,data:this.listGrid.currentData}).then(function(e){t.$util.esmessage(t,"check",t.labels.successMessage),t.getListData(),t.getRowData(e.data.id)}).catch(function(e){t.$util.esmessage(t,"warn",t.labels.fail),console.log(e)}))}},del:function(){var t=this;this.$util.esconfirm(this,"delete",this.labels.confirmDelete,function(){t.$http.delete("/episode/api/system/organization/"+t.listGrid.currentData.id).then(function(e){t.$util.esmessage(t,"delete",t.labels.deleteSuccess),t.getListData(),t.dialogFormVisible=!1}).catch(function(e){t.$util.esmessage(t,"warn",t.labels.fail),console.log(e)})})},addVar:function(){this.variableGrid.data.splice(0,0,{state:"ADDED",orgId:this.listGrid.currentData.orgId,key:"",value:"",description:""})},delVar:function(t,e){var a=this;"ADDED"!==e.state?this.$http.delete("/episode/api/system/organization/orgvariable/"+e.id).then(function(e){a.variableGrid.data.splice(t,1),a.$util.esmessage(a,"delete",a.labels.deleteSuccess)}).catch(function(t){a.$util.esmessage(a,"warn",a.labels.failMessage),console.log(t)}):this.variableGrid.data.splice(t,1)},exportFilter:function(){var t=[{value:"id",label:this.labels.id},{value:"orgId",label:this.labels.orgId},{value:"description",label:this.labels.description},{value:"status",label:this.labels.status},{value:"createDt",label:this.labels.createDt},{value:"createNm",label:this.labels.createId}];this.$util.csvExport(this.listGrid.filteredData,t,this.listGrid.columnNames,"organization")},handleFilteredData:function(t){this.listGrid.filteredData=t},enterSearch:function(){this.listGrid.currentPage=1,this.listGrid.filters[0].value=this.listGrid.searchParam}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"animated fadeIn"},[i("b-card",[i("b-row",[i("b-col",{attrs:{sm:"12"}},[i("b-row",[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"comm-btn-box",attrs:{role:"group"}},[i("b-button",{directives:[{name:"show",rawName:"v-show",value:t.visibleAdd,expression:"visibleAdd"}],staticClass:"px-3 sm",attrs:{variant:"primary"},on:{click:t.add}},[t._v(t._s(t.labels.new))])],1)])]),t._v(" "),i("p",{staticClass:"grid-line"}),t._v(" "),i("b-row",{staticStyle:{"padding-top":"20px"}},[i("div",{staticClass:"col-md-4",staticStyle:{"padding-top":"10px"}},[i("div",{staticClass:"search-component sm"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.listGrid.searchParam,expression:"listGrid.searchParam"}],staticClass:"form-control formdata sm",staticStyle:{width:"100%"},attrs:{placeholder:t.labels.search},domProps:{value:t.listGrid.searchParam},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterSearch(e)},input:function(e){e.target.composing||t.$set(t.listGrid,"searchParam",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"col-md-8"},[i("div",{staticClass:"float-right mt-2",staticStyle:{margin:"0px"},attrs:{role:"group"}},[i("el-button",{staticStyle:{padding:"0",width:"40px",height:"40px"},attrs:{title:t.labels.excelDownload},on:{click:t.exportFilter}},[i("img",{attrs:{src:a("QOY8"),width:"60%"}})])],1)])]),t._v(" "),i("b-row",{staticClass:"mt-2"},[i("div",{staticClass:"col-md-12"},[i("p",{staticClass:"grid-line"}),t._v(" "),t.listVisiable?i("data-tables",{ref:"orgTable",attrs:{"current-page":t.listGrid.currentPage,layout:"table, pagination","table-props":t.listGrid.tableProps,data:t.listGrid.data,filters:t.listGrid.filters,"page-size":10,"pagination-props":t.listGrid.pageProps},on:{"update:currentPage":function(e){return t.$set(t.listGrid,"currentPage",e)},"update:current-page":function(e){return t.$set(t.listGrid,"currentPage",e)},"filtered-data":t.handleFilteredData,"row-click":t.openModal}},[i("el-table-column",{attrs:{prop:"id",label:t.labels.id,width:"80"}}),t._v(" "),i("el-table-column",{attrs:{prop:"orgId",label:t.labels.orgId,width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"description",label:t.labels.description,width:"*"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:t.labels.status,width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createDt",label:t.labels.createDt,width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$util.dateTimeWithTimeZone(e.row.createDt)))]}}],null,!1,1074026702)}),t._v(" "),i("el-table-column",{attrs:{prop:"createNm",label:t.labels.createId,width:"150"}})],1):t._e()],1)]),t._v(" "),i("el-dialog",{attrs:{title:t.labels.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("b-row",[i("div",{staticClass:"col"},[i("el-form",{ref:"orgForm",attrs:{model:t.listGrid.currentData,"label-width":"120px"}},[i("b-row",{staticClass:"mt-2"},[i("div",{staticClass:"form-group col-md-6",staticStyle:{"padding-right":"1%"}},[i("label",{attrs:{for:"organization_id"}},[t._v(t._s(t.labels.id))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.listGrid.currentData.id,expression:"listGrid.currentData.id"}],staticClass:"formdata sm float-right",staticStyle:{width:"100%"},attrs:{id:"organization_id",placeholder:"Id",disabled:"disabled"},domProps:{value:t.listGrid.currentData.id},on:{input:function(e){e.target.composing||t.$set(t.listGrid.currentData,"id",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form-group col-md-6",staticStyle:{"padding-right":"1%"}},[i("label",{attrs:{for:"organization_orgId"}},[t._v(t._s(t.labels.orgId)),i("span",{staticClass:"require-mark"},[t._v("*")])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.listGrid.currentData.orgId,expression:"listGrid.currentData.orgId"}],staticClass:"formdata sm float-right",staticStyle:{width:"100%"},attrs:{id:"organization_orgId",placeholder:t.labels.inputDataMsg,disabled:this.listGrid.currentData.hasOwnProperty("id"),maxlength:"20"},domProps:{value:t.listGrid.currentData.orgId},on:{blur:t.blurOrgId,input:function(e){e.target.composing||t.$set(t.listGrid.currentData,"orgId",e.target.value)}}}),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.$util.isNull(t.validMsg.orgIdMsg),expression:"!$util.isNull(validMsg.orgIdMsg)"}],staticClass:"form_some-copy sm error",domProps:{textContent:t._s(t.validMsg.orgIdMsg)}})])]),t._v(" "),i("b-row",{staticClass:"mt-2"},[i("div",{staticClass:"form-group col-md-6",staticStyle:{"padding-right":"1%"}},[i("label",{attrs:{for:"organization_description"}},[t._v(t._s(t.labels.description)),i("span",{staticClass:"require-mark"},[t._v("*")])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.listGrid.currentData.description,expression:"listGrid.currentData.description"}],staticClass:"formdata sm float-right",staticStyle:{width:"100%"},attrs:{id:"organization_description",placeholder:t.labels.inputDataMsg,maxlength:"50"},domProps:{value:t.listGrid.currentData.description},on:{change:function(e){return t.changeValue(t.listGrid.currentData)},input:function(e){e.target.composing||t.$set(t.listGrid.currentData,"description",e.target.value)}}}),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.$util.isNull(t.validMsg.desMsg),expression:"!$util.isNull(validMsg.desMsg)"}],staticClass:"form_some-copy sm error",domProps:{textContent:t._s(t.validMsg.desMsg)}})]),t._v(" "),i("div",{staticClass:"form-group col-md-6",staticStyle:{"padding-right":"1%"}},[i("label",{attrs:{for:"organization_status"}},[t._v(t._s(t.labels.status)),i("span",{staticClass:"require-mark"},[t._v("*")])]),t._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{id:"organization_status"},on:{change:function(e){return t.changeValue(t.listGrid.currentData)}},model:{value:t.listGrid.currentData.status,callback:function(e){t.$set(t.listGrid.currentData,"status",e)},expression:"listGrid.currentData.status"}},t._l(t.statusSelect,function(e){return i("el-option",{key:e.key,attrs:{prop:e.key,value:e.key}},[t._v("\n                        "+t._s(e.key)+"\n                      ")])}),1)],1)]),t._v(" "),i("b-row",{staticClass:"mt-2"},[i("div",{staticClass:"form-group col-md-3",staticStyle:{"padding-right":"1%"}},[i("label",{attrs:{for:"organization_createId"}},[t._v(t._s(t.labels.createId))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.listGrid.currentData.createNm,expression:"listGrid.currentData.createNm"}],staticClass:"formdata sm float-right",staticStyle:{width:"100%"},attrs:{id:"organization_createId",placeholder:"CREATER",disabled:"disabled"},domProps:{value:t.listGrid.currentData.createNm},on:{input:function(e){e.target.composing||t.$set(t.listGrid.currentData,"createNm",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form-group col-md-3",staticStyle:{"padding-right":"1%"}},[i("label",{attrs:{for:"organization_createDt"}},[t._v(t._s(t.labels.createDt))]),t._v(" "),i("input",{staticClass:"formdata sm float-right",staticStyle:{width:"100%"},attrs:{id:"organization_createDt",placeholder:"CREATE DATE",disabled:"disabled"},domProps:{value:t.$util.dateTimeWithTimeZone(t.listGrid.currentData.createDt)}})]),t._v(" "),i("div",{staticClass:"form-group col-md-3",staticStyle:{"padding-right":"1%"}},[i("label",{attrs:{for:"organization_updateId"}},[t._v(t._s(t.labels.updateId))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.listGrid.currentData.updateNm,expression:"listGrid.currentData.updateNm"}],staticClass:"formdata sm float-right",staticStyle:{width:"100%"},attrs:{id:"organization_updateId",placeholder:"UPDATER",disabled:"disabled"},domProps:{value:t.listGrid.currentData.updateNm},on:{input:function(e){e.target.composing||t.$set(t.listGrid.currentData,"updateNm",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form-group col-md-3",staticStyle:{"padding-right":"1%"}},[i("label",[t._v(t._s(t.labels.updateDt))]),t._v(" "),i("input",{staticClass:"formdata sm float-right",staticStyle:{width:"100%"},attrs:{id:"organization_updateDt",placeholder:"UPDATE DATE",disabled:"disabled"},domProps:{value:t.$util.dateTimeWithTimeZone(t.listGrid.currentData.updateDt)}})])]),t._v(" "),i("div",{staticClass:"col-md-12"},[i("b-row",[i("div",{staticClass:"col"},[i("div",{staticClass:"float-right mt-3",attrs:{role:"group"}},[i("b-button",{directives:[{name:"show",rawName:"v-show",value:t.visibleAddVar,expression:"visibleAddVar"}],staticClass:"px-3 sm",attrs:{variant:"primary"},on:{click:t.addVar}},[t._v(t._s(t.labels.new))])],1)])]),t._v(" "),i("b-row",{staticClass:"mt-2"},[i("div",{staticClass:"form-group col"},[i("p",{staticClass:"grid-line"}),t._v(" "),i("data-tables",{attrs:{layout:"table, pagination",data:t.variableGrid.data,filters:t.variableGrid.filters,"page-size":t.variableGrid.pageProps.pageSize,"pagination-props":t.variableGrid.pageProps}},[i("el-table-column",{attrs:{prop:"key",label:t.labels.key},scopedSlots:t._u([{key:"default",fn:function(e){return[i("input",{directives:[{name:"model",rawName:"v-model",value:e.row.key,expression:"props.row.key"}],staticClass:"form-control formdata sm",attrs:{type:"text",disabled:e.row.hasOwnProperty("id")},domProps:{value:e.row.key},on:{change:function(a){return t.changeValue(e.row)},input:function(a){a.target.composing||t.$set(e.row,"key",a.target.value)}}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"value",label:t.labels.value},scopedSlots:t._u([{key:"default",fn:function(e){return[i("input",{directives:[{name:"model",rawName:"v-model",value:e.row.value,expression:"props.row.value"}],staticClass:"form-control formdata sm",attrs:{type:"text"},domProps:{value:e.row.value},on:{change:function(a){return t.changeValue(e.row)},input:function(a){a.target.composing||t.$set(e.row,"value",a.target.value)}}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"description",label:t.labels.description},scopedSlots:t._u([{key:"default",fn:function(e){return[i("input",{directives:[{name:"model",rawName:"v-model",value:e.row.description,expression:"props.row.description"}],staticClass:"form-control formdata sm",attrs:{type:"text"},domProps:{value:e.row.description},on:{change:function(a){return t.changeValue(e.row)},input:function(a){a.target.composing||t.$set(e.row,"description",a.target.value)}}})]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"right",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{padding:"0",width:"30px",height:"30px"},attrs:{title:t.labels.delete},on:{click:function(a){return t.delVar(e.$index,e.row)}}},[i("img",{attrs:{src:a("Z5mN"),width:"60%"}})])]}}])})],1)],1)])],1),t._v(" "),i("b-row",{staticClass:"mt-2"},[i("div",{staticClass:"col",staticStyle:{"padding-top":"20px"}},[i("div",{staticClass:"d-flex justify-content-end"},[i("b-button",{directives:[{name:"show",rawName:"v-show",value:t.visibleSave,expression:"visibleSave"}],staticClass:"px-3 sm",attrs:{variant:"primary"},on:{click:t.save}},[t._v(t._s(t.labels.save))]),t._v(" "),i("b-button",{directives:[{name:"show",rawName:"v-show",value:t.visibleDelete,expression:"visibleDelete"}],staticClass:"px-3 sm",attrs:{variant:"primary"},on:{click:t.del}},[t._v(t._s(t.labels.delete))]),t._v(" "),i("b-button",{staticClass:"px-3 sm",attrs:{variant:"primary"},on:{click:t.close}},[t._v(t._s(t.labels.close))])],1)])])],1)],1)])],1)],1)],1)],1)],1)},staticRenderFns:[]},o=a("VU/8")(r,l,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=15.3b471959b20298f5c0f8.js.map